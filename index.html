<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EduPresence - Sistem Absensi Guru</title>

  <!-- Font: Plus Jakarta Sans -->
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: { sans: ['"Plus Jakarta Sans"', 'sans-serif'] },
          colors: {
            primary: '#6366f1',
            primaryDark: '#4f46e5',
          }
        }
      }
    }
  </script>

  <style>
    body {
      background: linear-gradient(to bottom right, #f0f9ff, #e0e7ff);
      min-height: 100vh;
    }
    .glass-card {
      background: rgba(255, 255, 255, 0.85);
      backdrop-filter: blur(16px);
      border: 1px solid rgba(255, 255, 255, 0.4);
      border-radius: 1.5rem;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
    }
    .btn-primary {
      background: linear-gradient(to right, #6366f1, #8b5cf6);
      transition: all 0.3s ease;
    }
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 30px rgba(99, 102, 241, 0.3);
    }
    .sidebar-active {
      background: linear-gradient(to right, #6366f1, #8b5cf6);
      color: white !important;
    }
    #toast-container {
      position: fixed;
      top: 1.5rem;
      right: 1.5rem;
      z-index: 100;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    .toast {
      min-width: 320px;
      padding: 1rem 1.5rem;
      border-radius: 1rem;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
      display: flex;
      align-items: center;
      gap: 1rem;
      animation: slideIn 0.4s ease forwards;
      transform: translateX(100%);
    }
    .toast.success { background: #10b981; color: white; }
    .toast.error { background: #ef4444; color: white; }
    @keyframes slideIn {
      to { transform: translateX(0); }
    }
    .mobile-menu {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.5);
      z-index: 50;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }
    .mobile-menu.open {
      opacity: 1;
      visibility: visible;
    }
    .mobile-sidebar {
      width: 280px;
      height: 100%;
      background: white;
      transform: translateX(-100%);
      transition: transform 0.3s ease;
    }
    .mobile-sidebar.open {
      transform: translateX(0);
    }
  </style>
</head>
<body class="text-slate-800">

  <!-- Toast -->
  <div id="toast-container"></div>

  <!-- Mobile Menu Overlay -->
  <div id="mobileMenu" class="mobile-menu" onclick="closeMobileMenu()">
    <div class="mobile-sidebar open" onclick="event.stopPropagation()">
      <!-- Sidebar content akan di-duplicate via JS -->
    </div>
  </div>

  <!-- Login Page -->
  <div id="loginPage" class="min-h-screen flex items-center justify-center p-6">
    <div class="glass-card w-full max-w-md p-10">
      <div class="text-center mb-10">
        <div class="w-20 h-20 bg-gradient-to-br from-primary to-primaryDark rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-xl">
          <svg class="w-12 h-12 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/>
          </svg>
        </div>
        <h1 class="text-3xl font-extrabold">EduPresence</h1>
        <p class="text-slate-500 mt-2">Sistem Absensi Guru Modern</p>
      </div>

      <div class="space-y-6">
        <div>
          <label class="block text-sm font-semibold mb-2 text-slate-700">Username</label>
          <input id="username" type="text" class="w-full px-5 py-4 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-4 focus:ring-primary/30 focus:border-primary transition" placeholder="Masukkan username">
        </div>
        <div>
          <label class="block text-sm font-semibold mb-2 text-slate-700">Password</label>
          <div class="relative">
            <input id="password" type="password" class="w-full px-5 py-4 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-4 focus:ring-primary/30 focus:border-primary pr-14 transition" placeholder="••••••••">
            <button type="button" onclick="togglePassword()" class="absolute right-4 top-1/2 -translate-y-1/2 text-slate-500 hover:text-primary">
              <svg id="eye-icon" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
              </svg>
            </button>
          </div>
        </div>

        <button onclick="login()" class="w-full btn-primary text-white font-bold py-4 rounded-xl shadow-xl flex items-center justify-center gap-3 text-lg">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 16l4-4m0 0l-4-4m4 4H3m18 0h-4"/>
          </svg>
          Masuk Sekarang
        </button>
      </div>

      <p id="loginMsg" class="text-center text-red-500 font-medium mt-6"></p>
    </div>
  </div>

  <!-- Main App -->
  <div id="mainApp" class="hidden min-h-screen">
    <!-- Navbar -->
    <nav class="bg-white shadow-lg px-6 py-4 flex justify-between items-center sticky top-0 z-40">
      <div class="flex items-center gap-4">
        <button onclick="openMobileMenu()" class="lg:hidden text-primary">
          <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
          </svg>
        </button>
        <h1 class="text-2xl font-bold bg-gradient-to-r from-primary to-primaryDark bg-clip-text text-transparent">EduPresence</h1>
      </div>
      <div class="flex items-center gap-6">
        <span id="userName" class="font-semibold hidden lg:block"></span>
        <button onclick="logout()" class="text-red-600 hover:text-red-700 font-medium flex items-center gap-2">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/>
          </svg>
          Logout
        </button>
      </div>
    </nav>

    <div class="flex">
      <!-- Desktop Sidebar -->
      <aside id="desktopSidebar" class="hidden lg:block w-72 bg-white border-r border-slate-200 min-h-screen p-6">
        <nav class="space-y-2">
          <button onclick="showPage('dashboard')" id="nav-dashboard" class="w-full text-left px-5 py-4 rounded-xl flex items-center gap-4 font-medium text-slate-700 hover:bg-indigo-50 transition">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
            </svg>
            Dashboard Admin
          </button>
          <button onclick="showPage('absensi')" id="nav-absensi" class="w-full text-left px-5 py-4 rounded-xl flex items-center gap-4 font-medium sidebar-active">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
            </svg>
            Halaman Absen
          </button>
          <button onclick="showPage('rekap')" id="nav-rekap" class="w-full text-left px-5 py-4 rounded-xl flex items-center gap-4 font-medium text-slate-700 hover:bg-indigo-50 transition">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10"/>
            </svg>
            Riwayat & Grafik
          </button>
          <button onclick="showPage('manager')" id="nav-manager" class="w-full text-left px-5 py-4 rounded-xl flex items-center gap-4 font-medium text-slate-700 hover:bg-indigo-50 transition">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"/>
            </svg>
            Manajemen User
          </button>
        </nav>
      </aside>

      <!-- Content -->
      <main class="flex-1 p-6 lg:p-10">
        <!-- Dashboard -->
        <div id="dashboard" class="hidden">
          <h2 class="text-3xl font-bold mb-8">Ringkasan Kehadiran</h2>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div class="glass-card p-8">
              <p class="text-slate-600 mb-4 text-lg">Hadir Hari Ini</p>
              <p id="hariIni" class="text-5xl font-black text-primary">0</p>
            </div>
            <div class="glass-card p-8">
              <p class="text-slate-600 mb-4 text-lg">Total Bulan Ini</p>
              <p id="bulanIni" class="text-5xl font-black text-primary">0</p>
            </div>
          </div>
        </div>

        <!-- Absensi -->
        <div id="absensi">
          <div class="text-center mb-12">
            <h2 class="text-4xl font-bold text-slate-800">Presensi Harian</h2>
            <p id="todayDate" class="text-2xl text-primary font-semibold mt-3"></p>
          </div>
          <div class="glass-card max-w-2xl mx-auto p-12 text-center">
            <button id="btnAbsen" onclick="doAbsen()" class="btn-primary text-white px-16 py-12 rounded-3xl text-2xl font-bold shadow-2xl flex flex-col items-center gap-4 mx-auto">
              <svg class="w-20 h-20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"/>
              </svg>
              Absen Sekarang
            </button>
            <p id="absenMsg" class="mt-10 text-xl font-medium"></p>

            <div class="mt-12 pt-10 border-t border-slate-200">
              <p class="text-slate-600 mb-3">Total Kehadiran Bulan Ini</p>
              <p class="text-5xl font-black text-primary"><span id="totalBulan">0</span> Hari</p>
              <p class="text-slate-500 mt-3 text-sm">(Periode: 26 bulan lalu — 25 hari ini)</p>
            </div>
          </div>
        </div>

        <!-- Rekap -->
        <div id="rekap" class="hidden">
          <h2 class="text-3xl font-bold mb-8">Riwayat & Grafik Kehadiran</h2>
          <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <div class="lg:col-span-2 glass-card p-8">
              <h3 class="font-bold text-xl mb-6">Grafik Harian (Bulan Ini)</h3>
              <canvas id="attendanceChart" height="300"></canvas>
            </div>
            <div class="glass-card p-6">
              <h3 class="font-bold text-xl mb-6">Absen Terbaru</h3>
              <div class="space-y-4 max-h-96 overflow-y-auto">
                <table class="w-full text-sm" id="rekapTable"></table>
              </div>
            </div>
          </div>
        </div>

        <!-- Manager -->
        <div id="manager" class="hidden">
          <h2 class="text-3xl font-bold mb-8">Manajemen Pengguna</h2>
          <div class="glass-card overflow-hidden">
            <div class="overflow-x-auto">
              <table class="w-full">
                <thead class="bg-slate-50">
                  <tr>
                    <th class="p-6 text-left font-semibold">Nama Lengkap</th>
                    <th class="p-6 text-left font-semibold">Username</th>
                    <th class="p-6 text-left font-semibold">Password Baru</th>
                    <th class="p-6 text-left font-semibold">Role</th>
                    <th class="p-6 text-center font-semibold">Aksi</th>
                  </tr>
                </thead>
                <tbody id="userTable" class="divide-y divide-slate-100"></tbody>
              </table>
            </div>
          </div>
        </div>
      </main>
    </div>
  </div>

<script>
// GANTI DENGAN URL WEB APP ANDA!
const API_URL = 'https://script.google.com/macros/s/AKfycbx01WEQHO7bIt0bU0Km3IyJ50ZDw5VaAJoJEic7Yg95WS9vpkPxUIYPbVEdD0nSFqxqEQ/exec';

let currentUser = JSON.parse(localStorage.getItem('absensiUser')) || null;
let chartInstance = null;

function showToast(msg, type = 'success') {
  const container = document.getElementById('toast-container');
  const toast = document.createElement('div');
  toast.className = `toast ${type}`;
  toast.innerHTML = `
    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="${type === 'success' ? 'M5 13l4 4L19 7' : 'M6 18L18 6M6 6l12 12'}"/>
    </svg>
    <span class="font-semibold">${msg}</span>
  `;
  container.appendChild(toast);
  setTimeout(() => toast.remove(), 4000);
}

function togglePassword() {
  const pass = document.getElementById('password');
  const icon = document.getElementById('eye-icon');
  if (pass.type === 'password') {
    pass.type = 'text';
    icon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.542-7a9.97 9.97 0 011.952-3.055M6.118 6.118L3 9m3.118-3.118L9 3m5.882 15.882L21 21m-3.118-3.118L15 21m-5.882-2.118A3 3 0 119 12a3 3 0 013.882 5.882"/>';
  } else {
    pass.type = 'password';
    icon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>';
  }
}

function openMobileMenu() {
  document.getElementById('mobileMenu').classList.add('open');
  const mobileSidebar = document.querySelector('.mobile-sidebar');
  mobileSidebar.innerHTML = document.getElementById('desktopSidebar').innerHTML;
}

function closeMobileMenu() {
  document.getElementById('mobileMenu').classList.remove('open');
}

// Duplicate sidebar for mobile
window.addEventListener('resize', () => {
  if (window.innerWidth >= 1024) closeMobileMenu();
});

async function login() {
  const username = document.getElementById('username').value.trim();
  const password = document.getElementById('password').value;
  if (!username || !password) {
    document.getElementById('loginMsg').textContent = 'Username dan password wajib diisi!';
    return;
  }
  const result = await apiCall('login', { username, password });
  if (result.success) {
    currentUser = result;
    localStorage.setItem('absensiUser', JSON.stringify(currentUser));
    initApp();
  } else {
    document.getElementById('loginMsg').textContent = 'Username atau password salah!';
  }
}

function logout() {
  localStorage.removeItem('absensiUser');
  currentUser = null;
  location.reload();
}

function showPage(page) {
  document.querySelectorAll('main > div').forEach(el => el.classList.add('hidden'));
  document.getElementById(page).classList.remove('hidden');

  // Update active state
  document.querySelectorAll('#desktopSidebar button, .mobile-sidebar button').forEach(btn => {
    btn.classList.remove('sidebar-active');
  });
  document.querySelectorAll(`#nav-${page}`).forEach(btn => {
    btn.classList.add('sidebar-active');
  });
}

async function doAbsen() {
  const btn = document.getElementById('btnAbsen');
  btn.disabled = true;
  const today = new Date().toISOString().split('T')[0];
  const result = await apiCall('absen', { nama: currentUser.nama, tanggal: today }, 'POST');
  if (result.success) {
    showToast('Absen berhasil!', 'success');
  } else {
    showToast(result.message || 'Sudah absen hari ini!', 'error');
  }
  btn.disabled = false;
  loadAbsensi();
  loadRekap();
  loadChart();
  if (currentUser.role === 'admin') loadDashboard();
}

async function loadAbsensi() {
  const data = await apiCall('getAbsensiUser', { nama: currentUser.nama });
  const range = getMonthRange();
  let count = 0;
  data.forEach(row => {
    if (row.tanggal >= range.start && row.tanggal <= range.end) count++;
  });
  document.getElementById('totalBulan').textContent = count;
}

async function loadRekap() {
  const data = await apiCall('getAllAbsensi');
  const tbody = document.getElementById('rekapTable');
  tbody.innerHTML = '';
  data.slice(0, 10).reverse().forEach(row => {
    const tr = document.createElement('tr');
    tr.className = 'hover:bg-slate-50';
    tr.innerHTML = `
      <td class="p-4 font-medium">${row.nama}</td>
      <td class="p-4 text-slate-600">${row.waktu}</td>
    `;
    tbody.appendChild(tr);
  });
}

async function loadDashboard() {
  const data = await apiCall('getAllAbsensi');
  const today = new Date().toISOString().split('T')[0];
  const range = getMonthRange();
  const todayCount = data.filter(r => r.tanggal === today).length;
  const monthCount = data.filter(r => r.tanggal >= range.start && r.tanggal <= range.end).length;
  document.getElementById('hariIni').textContent = todayCount;
  document.getElementById('bulanIni').textContent = monthCount;
}

async function loadChart() {
  const data = await apiCall('getAllAbsensi');
  const range = getMonthRange();
  const daily = {};
  data.forEach(r => {
    if (r.tanggal >= range.start && r.tanggal <= range.end) {
      daily[r.tanggal] = (daily[r.tanggal] || 0) + 1;
    }
  });
  const labels = [];
  const values = [];
  let curr = new Date(range.start);
  const end = new Date(range.end);
  while (curr <= end) {
    const key = curr.toISOString().split('T')[0];
    labels.push(curr.getDate());
    values.push(daily[key] || 0);
    curr.setDate(curr.getDate() + 1);
  }

  const ctx = document.getElementById('attendanceChart').getContext('2d');
  if (chartInstance) chartInstance.destroy();
  chartInstance = new Chart(ctx, {
    type: 'line',
    data: {
      labels,
      datasets: [{
        label: 'Jumlah Hadir',
        data: values,
        borderColor: '#6366f1',
        backgroundColor: 'rgba(99, 102, 241, 0.1)',
        fill: true,
        tension: 0.4,
        pointBackgroundColor: '#6366f1',
      }]
    },
    options: {
      responsive: true,
      plugins: { legend: { display: false } },
      scales: { y: { beginAtZero: true, ticks: { stepSize: 1 } } }
    }
  });
}

async function loadUsers() {
  const data = await apiCall('getAllUsers');
  const tbody = document.getElementById('userTable');
  tbody.innerHTML = data.map(u => `
    <tr class="hover:bg-slate-50">
      <td class="p-6"><input value="${u.nama}" class="w-full px-4 py-3 border rounded-lg"></td>
      <td class="p-6"><input value="${u.username}" class="w-full px-4 py-3 border rounded-lg"></td>
      <td class="p-6"><input type="password" placeholder="Kosongkan jika tidak ubah" class="w-full px-4 py-3 border rounded-lg"></td>
      <td class="p-6">
        <select class="w-full px-4 py-3 border rounded-lg">
          <option value="admin" ${u.role==='admin'?'selected':''}>Admin</option>
          <option value="guru" ${u.role==='guru'?'selected':''}>Guru</option>
        </select>
      </td>
      <td class="p-6 text-center">
        <button onclick="saveUser(${u.row}, this)" class="bg-gradient-to-r from-primary to-primaryDark text-white px-6 py-3 rounded-lg font-medium shadow hover:shadow-lg">
          Simpan
        </button>
      </td>
    </tr>
  `).join('');
}

async function saveUser(row, btn) {
  const tr = btn.closest('tr');
  const inputs = tr.querySelectorAll('input');
  const select = tr.querySelector('select');
  const payload = {
    row,
    nama: inputs[0].value.trim(),
    username: inputs[1].value.trim(),
    password: inputs[2].value,
    role: select.value
  };
  btn.disabled = true;
  btn.textContent = 'Menyimpan...';
  const res = await apiCall('updateUser', payload, 'POST');
  btn.disabled = false;
  btn.textContent = 'Simpan';
  showToast(res.success ? 'Berhasil disimpan!' : 'Gagal menyimpan', res.success ? 'success' : 'error');
}

function getMonthRange() {
  const today = new Date();
  const year = today.getFullYear();
  const month = today.getMonth();
  const start = new Date(year, month - 1, 26);
  const end = new Date(year, month, 25);
  return { start: start.toISOString().split('T')[0], end: end.toISOString().split('T')[0] };
}

async function apiCall(action, params = {}, method = 'GET') {
  let url = `${API_URL}?action=${action}`;
  if (method === 'GET' && Object.keys(params).length) {
    Object.keys(params).forEach(k => url += `&${k}=${encodeURIComponent(params[k])}`);
  }
  const opts = { method };
  if (method === 'POST') {
    opts.headers = { 'Content-Type': 'application/json' };
    opts.body = JSON.stringify({ action, ...params });
  }
  const res = await fetch(url, opts);
  return await res.json();
}

function initApp() {
  document.getElementById('loginPage').classList.add('hidden');
  document.getElementById('mainApp').classList.remove('hidden');
  document.getElementById('userName').textContent = currentUser.nama;
  document.getElementById('todayDate').textContent = new Date().toLocaleDateString('id-ID', { weekday: 'long', day: 'numeric', month: 'long', year: 'numeric' });

  if (currentUser.role === 'admin') {
    document.querySelectorAll('#nav-dashboard, #nav-manager').forEach(el => el.classList.remove('hidden'));
    showPage('dashboard');
    loadDashboard();
    loadUsers();
  } else {
    showPage('absensi');
  }

  loadAbsensi();
  loadRekap();
  loadChart();
}

if (currentUser) {
  initApp();
}
</script>

</body>
</html>
